<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style/homestyle.css">
    <title>Home</title>

</head>
<body>


	<!-- SIDEBAR -->
	<section id="sidebar">
		<a class="brand">
			<i class='bx bxs-user-circle' ></i>
			<span class="text">Account Page</span>
		</a>
		<ul class="side-menu top">
			<li class="active">
				<a href="#home">
					<i class='bx bxs-dashboard' ></i>
					<span class="text">Dashboard</span>
				</a>
			</li>
            <li>
				<a href="#progress">
					<i class='bx bxs-doughnut-chart' ></i>
					<span class="text">Progress</span>
				</a>
			</li>
			<li>
				<a href="#store">
					<i class='bx bxs-shopping-bag-alt' ></i>
					<span class="text">Store</span>
				</a>
			</li>
			<li>
				<a href="#team">
					<i class='bx bxs-group' ></i>
					<span class="text">Team</span>
				</a>
			</li>
		</ul>
		<ul class="side-menu">
			<li>
				<a href="#account">
					<i class='bx bxs-cog' ></i>
					<span class="text">Settings</span>
				</a>
			</li>
			<li>
				<a href="index.html" id="logout" class="logout">

					<i class='bx bxs-log-out-circle' ></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->

	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu' ></i>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">0</span>
			</a>
			<a href="#account" class="profile">
				<img src="images/user.jpg">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<section id="home">
				<div class="head-title">
					<div class="left">
						<h1>Dashboard</h1>
						<ul class="breadcrumb">
							<li>
								<a href="#">Dashboard</a>
							</li>
							<li><i class='bx bx-chevron-right' ></i></li>
							<li>
								<a href="#">Home</a>
							</li>
						</ul>
					</div>
				</div>
	
				<ul class="box-info">
					<li>
						<i class='bx bxs-trash' ></i>
						<span class="text">
							<h3>20</h3>
							<p>Trash Recycled</p>
						</span>
					</li>
					<li>
						<i class='bx bxs-map' ></i>
						<span class="text">
							<h3>2/7</h3>
							<p>Map Unlocked</p>
						</span>
					</li>
					<li>
						<i class='bx bxs-trophy' ></i>
						<span class="text">
							<h3>4/12</h3>
							<p>Achievement</p>
						</span>
					</li>
				</ul>
				<div class="table-data">
					<div class="order">
						<div class="head">
							<h3>Recent Activity</h3>
							<i class='bx bx-search' ></i>
							<i class='bx bx-filter' ></i>
						</div>
						<table>
							<thead>
								<tr>
									<th>Achievement</th>
									<th>Date Order</th>
									<th>Status</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<img src="images/ach8.svg">
										<p>20 Trash Recycled!</p>
									</td>
									<td>01-01-2024</td>
									<td><span class="status completed">Completed</span></td>
								</tr>
								<tr>
									<td>
										<img src="images/world2.svg">
										<p>Reach World 2!</p>
									</td>
									<td>12-12-2023</td>
									<td><span class="status completed">Completed</span></td>
								</tr>
								<tr>
									<td>
										<img src="images/ach5.svg">
										<p>1st Step to Greenliness!</p>
									</td>
									<td>11-11-2023</td>
									<td><span class="status completed">Completed</span></td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="todo">
						<div class="head">
							<h3>Mission</h3>
							<i class='bx bx-plus' ></i>
							<i class='bx bx-filter' ></i>
						</div>
						<ul class="todo-list">
							<li class="not-completed">
								<p>Reach world 3</p>
								<i class='bx bx-dots-vertical-rounded' ></i>
							</li>
							<li class="not-completed">
								<p>Complete world 1 minigame</p>
								<i class='bx bx-dots-vertical-rounded' ></i>
							</li>
							<li class="not-completed">
								<p>Recycle 30 Trash</p>
								<i class='bx bx-dots-vertical-rounded' ></i>
							</li>
							<div class="center-icon">
								<i class='bx bx-dots-horizontal-rounded'></i>
							</div>
						</ul>
					</div>
				</div>
			</section>
			<section id="progress">
				<div class="head-title">
					<div class="left">
						<h1>Account Progress</h1>
						<ul class="breadcrumb">
							<li>
								<a href="#">Dashboard</a>
							</li>
							<li><i class='bx bx-chevron-right' ></i></li>
							<li>
								<a href="#">Progress</a>
							</li>
						</ul>
					</div>
				</div>
	
				<ul class="box-info">
					<li>
						<i class='bx bxs-trash' ></i>
						<span class="text">
							<h3>20</h3>
							<p>Trash Recycled</p>
						</span>
					</li>
					<li>
						<i class='bx bxs-map' ></i>
						<span class="text">
							<h3>2/7</h3>
							<p>Map Unlocked</p>
						</span>
					</li>
					<li>
						<i class='bx bxs-trophy' ></i>
						<span class="text">
							<h3>4/12</h3>
							<p>Achievement</p>
						</span>
					</li>
				</ul>
				
				<div class="box-info">
					<div class="prog-container">
						<div class="head">
							<h1>Statistics</h1>
						</div>
						<div class="skill-box">
							<span class="title">Total Trash Goal</span>
							<div class="skill-bar">
								<span class="skill-per trash-goal">
									<span class="tooltip">70%</span>
								</span>
							</div>
						</div>
						<div class="skill-box">
							<span class="title">Story Progression</span>
							<div class="skill-bar">
								<span class="skill-per story">
									<span class="tooltip">65%</span>
								</span>
							</div>
						</div>
						<div class="skill-box">
							<span class="title">Map Discoved</span>
							<div class="skill-bar">
								<span class="skill-per map">
									<span class="tooltip">29%</span>
								</span>
							</div>
						</div>
						<div class="skill-box">
							<span class="title">Achievement Unlocked</span>
							<div class="skill-bar">
								<span class="skill-per achievement">
									<span class="tooltip">40%</span>
								</span>
							</div>
						</div>
					</div>
				</div>
			</section>
			<section id="store">
				<header class="store-header">Store</header>
					<div class="store">
				
					  <div class="food-items">
						<h5 class="price"> $5 </h5>
						<img src="images/solo.png">
						<div class="details">
							<div class="details-sub">
								<h5>Café Solo Serenity</h5>
							</div>
							<p>Experience pure tranquility in a cup with our Café Solo Serenity, a single-origin coffee that boasts exceptional flavor and aroma, perfect for those seeking a moment of calm and indulgence.</p>
							<button class="menu-cart"><i class="fa-solid fa-cart-shopping fab-icon"></i>Add To Cart</button>
						</div>
					</div>
				
					  <div class="food-items">
						<h5 class="price"> $8 </h5>
						  <img src="images/cookies.png">
						  <div class="details">
							  <div class="details-sub">
								  <h5>Sweet Harmony Coffee and Cookie Duo</h5> 
							  </div>
							  <p>Our Sweet Harmony Coffee and Cookie Duo is the ultimate pairing of freshly brewed coffee and delectable cookies, creating a symphony of sweet flavors that delight the senses.</p>
							  <button class="menu-cart"><i class="fa-solid fa-cart-shopping fab-icon"></i>Add To Cart</button>
						  </div>
					  </div>
				
					  <div class="food-items">
						<h5 class="price"> $15 </h5>
						  <img src="images/sushi.png">
						  <div class="details">
							  <div class="details-sub">
								  <h5>Savory Soy Sushi and Matcha Bliss</h5>
							  </div>
							  <p>Indulge in the savory goodness of our Soy Sushi while savoring the soothing bliss of Matcha tea. It's a culinary journey that satisfies both your taste buds and your soul.</p>
							  <button class="menu-cart"><i class="fa-solid fa-cart-shopping fab-icon"></i>Add To Cart</button>
						  </div>
					  </div>
				
					  <div class="food-items">
						<h5 class="price"> $12 </h5>
						  <img src="images/burger.png">
						  <div class="details">
							  <div class="details-sub">
								  <h5>Surf 'n Turf Fusion Delight</h5>
							  </div>
							  <p>Our best-selling Surf 'n Turf Fusion Delight is a mouthwatering combination of gourmet burgers, fresh sushi, and a medley of flavors that will have your taste buds dancing in delight.</p>
							  <button class="menu-cart"><i class="fa-solid fa-cart-shopping fab-icon"></i>Add To Cart</button>
						  </div>
					  </div>
				
					  <div class="food-items">
						<h5 class="price"> $8 </h5>
						  <img src="images/bread-lowres.png">
						  <div class="details">
							  <div class="details-sub">
								  <h5>BST Symphony</h5>
							  </div>
							  <p>Discover the perfect harmony of flavors with our BST Symphony, where burgers, sushi, and tea come together in a delightful culinary experience that's both satisfying and unique.</p>
							  <button class="menu-cart"><i class="fa-solid fa-cart-shopping fab-icon"></i>Add To Cart</button>
						  </div>
					  </div>
				
					  <div class="food-items">
						<h5 class="price"> $50 </h5>
						  <img src="images/menu.png">
						  <div class="details">
							  <div class="details-sub">
								  <h5>Exquisite Epicurean Voyage</h5>
							  </div>
							  <p>Embark on an Exquisite Epicurean Voyage with our luxurious offering, featuring fine liquor, succulent grapes, premium coffee, artisan sushi, and rich soy sauce. A journey for the connoisseur in search of opulence and indulgence. Includes:Liquor, Grapes,Coffee, Sushi & Soy Sauce</p>
							  <button class="menu-cart"><i class="fa-solid fa-cart-shopping fab-icon"></i>Add To Cart</button>
						  </div>
					  </div>
				  </div>
			</section>
			<section id="team">
				<div class="head-title">
					<div class="left">
						<h1>About Us</h1>
						<ul class="breadcrumb">
							<li>
								<a href="#">Dashboard</a>
							</li>
							<li><i class='bx bx-chevron-right' ></i></li>
							<li>
								<a href="#">About us</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="account-container">
					<div class="user-info">
						<img src="images/user.jpg" alt="User Image">
					</div>				
					<div class="user-details">
						<div class="field">
							<label for="username">Kyle Nicol</label>
							<p>Pellentesque sollicitudin tortor mi, at accumsan lorem elementum nec. Praesent mollis non risus quis egestas. Phasellus interdum ex eros, a vestibulum tellus rutrum sit amet.</p>
						</div>
					</div>
				</div>
				<div class="account-container">
					<div class="user-info">
						<img src="images/user.jpg" alt="User Image">
					</div>				
					<div class="user-details">
						<div class="field">
							<label for="username">Kyle Nicol</label>
							<p>Pellentesque sollicitudin tortor mi, at accumsan lorem elementum nec. Praesent mollis non risus quis egestas. Phasellus interdum ex eros, a vestibulum tellus rutrum sit amet.</p>
						</div>
					</div>
				</div>
				<div class="account-container">
					<div class="user-info">
						<img src="images/user.jpg" alt="User Image">
					</div>				
					<div class="user-details">
						<div class="field">
							<label for="username">Kyle Nicol</label>
							<p>Pellentesque sollicitudin tortor mi, at accumsan lorem elementum nec. Praesent mollis non risus quis egestas. Phasellus interdum ex eros, a vestibulum tellus rutrum sit amet.</p>
						</div>
					</div>
				</div>
			</section>
			<section id="account">
				<div class="head-title">
					<div class="left">
						<h1>Account Settings</h1>
						<ul class="breadcrumb">
							<li>
								<a href="#">Dashboard</a>
							</li>
							<li><i class='bx bx-chevron-right' ></i></li>
							<li>
								<a href="#">Account</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="account-container">
					<div class="user-info">
						<img src="images/user.jpg" alt="User Image">
					</div>
				
					<div class="user-details">
						<div class="field">
							<label for="username">Username: Kyle Nicol</label>
							<p id="usernameField"></p>
						</div>
				
						<div class="field">
							<label for="email"></label>
							<p id="emailField"></p>
						</div>
				
						<div class="field">
							<label for="uid"></label>
							<p id="uidField"></p>
						</div>
					</div>
				</div>
			</section>
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->

	<script src="script.js"></script>
</body>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
    import { getDatabase, update, ref } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBN1stC5Qfa95frUyegI28oV-IWV7OwD58",
      authDomain: "finalsunity.firebaseapp.com",
      databaseURL: "https://finalsunity-default-rtdb.firebaseio.com",
      projectId: "finalsunity",
      storageBucket: "finalsunity.appspot.com",
      messagingSenderId: "19079537345",
      appId: "1:19079537345:web:b8713a7a4bef5d275a6a40",
      measurementId: "G-YRPS32W23Y"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);
    let uid;

    const user = auth.currentUser;

    onAuthStateChanged(auth, (user) => {
    if (user) {
        uid = user.uid;
        let status = 'online';

        document.getElementById('emailField').innerText = `Email: ${user.email || "N/A"}`;
        document.getElementById('uidField').innerText = `UID: ${user.uid || "N/A"}`;

        const userRef = ref(database, 'users/' + uid);
        update(userRef, {
            status: status,
        });

    } else {
        // User is signed out
		console.log("User not authenticated.");
        // ...
    }
});

document.addEventListener('DOMContentLoaded', function () {
    const logoutButton = document.getElementById('logout');

    logoutButton.addEventListener('click', (e) => {
        e.preventDefault();

        signOut(auth).then(() => {
            const userRef = ref(database, 'users/' + uid); 
            update(userRef, {
                status: 'offline',
            });
            alert('User Logout');
            window.location.href = 'index.html';
        }).catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            alert(errorMessage);
        });
    });
});


</script>
</html>